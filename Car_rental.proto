syntax = "proto3";

package Car_rental;

import "google/protobuf/empty.proto";

message User{
    string userId = 1;
    string name = 2;
    string userType = 3; // "Admin" or "Customer"
}

message Car{
    string number_plate = 1;
    string make = 2;
    string model = 3;
    int32 year = 4;
    float daily_price = 5;
    int32 mileage = 6;
    string status = 7;
}

message CartItem{
    string number_plate = 1;
    string start_date = 2;
    string end_date = 3;
}

message Reservation{
    string reservationId = 1;
    string customerId = 2;
    string number_plate = 3;
    string start_date = 4;
    string end_date = 5;
    float price = 6;
    string confirm_status = 7;
}

message CreateUsersResponse{
    string message = 1;
}

message AddCarRequest{
    Car car = 1;
}

message AddCarResponse{
    string number_plate = 1;
}

message UpdateCarRequest{
    string number_plate = 1;
    Car updatedCar = 2;
}

message RemoveCarRequest{
    string number_plate =1;
}

message RemoveCarResponse{
    repeated Car cars = 1;
}

message ListAvailableCarsRequest{
    string filter_text = 1;
}

message SearchCarRequest{
    string number_plate = 1;
}

message SearchCarResponse{
    Car car = 1;
    string message = 2;
}

message AddToCartRequest{
    CartItem cart_item = 1;
}

message PlaceReservationRequest{
    string customerId = 1;
}

message PlaceReservationResponse{
    string message = 1;
}

message ListAllReservationsRequest{
    string adminId = 1;
}

message ListAllReservationsResponse{
    repeated Reservation reservations = 1;
}

// Define the car rental service
service CarRentalService{
    rpc CreateUsers(stream User) returns (CreateUsersResponse);

//Admin services
rpc AddCar(AddCarRequest) returns (AddCarResponse);
rpc UpdateCar(UpdateCarRequest) returns (Car);
rpc RemoveCar(RemoveCarRequest) returns (RemoveCarResponse);
rpc ListAllReservations(ListAllReservationsRequest) returns (ListAllReservationsResponse);

//Customers services
rpc ListAvailableCars(ListAvailableCarsRequest) returns (stream Car);
rpc SearchCar(SearchCarRequest) returns (SearchCarResponse);
rpc AddToCart(AddToCartRequest) returns (google.protobuf.Empty);
rpc PlaceReservation(PlaceReservationRequest) returns (PlaceReservationResponse);
}